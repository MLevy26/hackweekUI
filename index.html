<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Compass</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #F5F7FA;
            margin: 0;
            padding: 20px;
            color: #2C3E50;
            line-height: 1.6;
        }

        .post-form-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        h2 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #2C3E50;
        }

        h3 {
            font-size: 22px;
            margin-top: 20px;
            color: #34495E;
        }

        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 15px;
            color: #34495E;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            font-size: 15px;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            background-color: #FFFFFF;
            box-sizing: border-box;
            color: #2C3E50;
        }

        .search-button {
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 12px;
        }

        .search-results {
            margin-top: 24px;
        }

        .search-summary {
            background-color: #E3F2FD;
            padding: 12px 16px;
            border-radius: 4px;
            color: #1976D2;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .result-item {
            padding: 20px;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            margin-bottom: 16px;
            background-color: #FFFFFF;
        }

        .result-section {
            font-size: 18px;
            font-weight: 600;
            color: #2C3E50;
            margin-bottom: 16px;
        }

        .result-content {
            font-size: 14px;
            line-height: 1.6;
            color: #2C3E50;
            margin-bottom: 16px;
        }

        .result-type {
            font-size: 13px;
            color: #666;
            background-color: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .save-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            margin-right: 8px;
        }

        .export-button {
            background-color: #757575;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
        }

        .search-term-highlight {
            background-color: #FFF9C4;
            padding: 2px 0;
        }

        .editable-content {
            padding: 12px;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
            margin: 12px 0;
            min-height: 100px;
            font-size: 14px;
            line-height: 1.6;
        }

        [contenteditable="true"]:focus {
            outline: none;
            border-color: #2196F3;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="post-form-container">
        <h2>Content Compass</h2>
        <div class="form-group">
            <label>Select the Content Database*</label>
            <select class="form-control" id="postType">
                <option value="square-help">Square Help</option>
                <option value="squarewise">Google Drive</option>
                <option value="high-spot">High Spot</option>
            </select>
        </div>

        <div class="form-group">
            <label>Search Your Topic</label>
            <input type="text" class="form-control" id="searchTopic" placeholder="Search Your Topic">
            <button class="search-button" id="searchButton">Search</button>
        </div>

        <div id="searchResults" class="search-results"></div>
    </div>

    <script>
        const squareHelpContent = {
            articles: [
                {
                    title: "Overview of Square Risk Manager",
                    content: "Square Risk Manager helps you monitor and manage suspicious activity in your Square account. With Risk Manager, you can view flagged payments, customize your risk settings, and manage your payment risk. Risk Manager provides tools like Address Verification System (AVS) and Card Verification Value (CVV) to help prevent fraudulent transactions.",
                    type: "section"
                }
                // ... other articles ...
            ]
        };

        function saveContent(sectionTitle) {
            const contentDiv = document.querySelector(`[data-section="${sectionTitle}"]`);
            if (contentDiv) {
                const articleIndex = squareHelpContent.articles.findIndex(a => a.title === sectionTitle);
                if (articleIndex !== -1) {
                    squareHelpContent.articles[articleIndex].content = contentDiv.innerText;
                }
            }
        }

        function exportContent(sectionTitle) {
            const contentDiv = document.querySelector(`[data-section="${sectionTitle}"]`);
            if (contentDiv) {
                const content = contentDiv.innerText;
                const blob = new Blob([content], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${sectionTitle.toLowerCase().replace(/\s+/g, '-')}.txt`;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
            }
        }

        function handleSearch() {
            const searchQuery = document.getElementById('searchTopic').value.trim();
            const resultsDiv = document.getElementById('searchResults');

            if (!searchQuery) {
                resultsDiv.innerHTML = '<div class="error-message">Please enter a search term</div>';
                return;
            }

            const searchTerms = searchQuery.toLowerCase().split(' ').filter(term => term.length > 0);
            const searchResults = [];

            squareHelpContent.articles.forEach(article => {
                const matches = searchTerms.every(term => 
                    article.content.toLowerCase().includes(term)
                );

                if (matches) {
                    searchResults.push({
                        title: article.title,
                        content: article.content,
                        type: article.type
                    });
                }
            });

            if (searchResults.length > 0) {
                resultsDiv.innerHTML = `
                    <h3>Search Results from Square Risk Manager Guide</h3>
                    <div class="search-summary">Found ${searchResults.length} matching sections</div>
                    ${searchResults.map(result => {
                        let highlightedContent = result.content;
                        searchTerms.forEach(term => {
                            const regex = new RegExp(`(${term})`, 'gi');
                            highlightedContent = highlightedContent.replace(regex, '<span class="search-term-highlight">$1</span>');
                        });
                        
                        return `
                            <div class="result-item">
                                <div class="result-section">${result.title}</div>
                                <div class="editable-content" contenteditable="true" data-section="${result.title}">${highlightedContent}</div>
                                <div class="result-type">${result.type}</div>
                                <button class="save-button" onclick="saveContent('${result.title}')">Save Changes</button>
                                <button class="export-button" onclick="exportContent('${result.title}')">Export to Text</button>
                            </div>
                        `;
                    }).join('')}
                `;
            } else {
                resultsDiv.innerHTML = '<div class="no-results">No matching content found</div>';
            }
        }

        document.getElementById('searchButton').addEventListener('click', handleSearch);
        document.getElementById('searchTopic').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSearch();
        });
    </script>
</body>
</html>